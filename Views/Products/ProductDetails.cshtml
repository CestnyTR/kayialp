@{
    var culture = (string?)ViewData["Culture"] ?? "tr";

    var rd = ViewContext.RouteData.Values;
    // Route'tan oku
    var productSlug = rd["productSlug"]?.ToString();
    int? id = null;
    if (int.TryParse(rd["id"]?.ToString(), out var tmpId)) id = tmpId;

    // (geri uyumluluk: query'den gelirse yine de al)
    if (productSlug is null) productSlug = (string?)Context.Request.Query["slug"];
    if (id is null && int.TryParse(Context.Request.Query["id"], out var qid)) id = qid;
}


<!--============================== Breadcumb ==============================-->
<!-- … breadcumb kısmın aynı … -->
<div class="breadcumb-area ">
    <div class="breadcumb-wrapper" data-bg-src="/img/bg/breadcumb-bg.jpg">
        <div class="container">
            <div class="breadcumb-content">
                <h1 class="breadcumb-title">@Html.Localize(key:"pages.layout.products")</h1>
                <ul class="breadcumb-menu">
                    <li><a href="/">@Html.Localize("pages.layout.index")</a></li>
                    <li><a asp-controller="Products" asp-action="Index" asp-route-culture="@ViewData["Culture"]">@Html.Localize(key:"pages.layout.productCategory")</a></li>
                    <li>@Html.Localize(key:"pages.layout.products")</li>
                </ul>
            </div>
        </div>
    </div>
</div>


@* === DETAY === *@
@await Component.InvokeAsync("ProductDetails", new { id = id, slug = productSlug })
